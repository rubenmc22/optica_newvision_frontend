<div class="employee-management-container">
    <!-- Encabezado y botón -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="title mb-0">Gestión de Usuarios</h2>
        <!-- Botón para abrir el modal de formulario dinámico -->
        <button class="btn btn-primary" (click)="openDynamicModal()">
            <i class="fas fa-plus me-2"></i>Agregar Nuevo Empleado
        </button>
    </div>

    <!-- Modal de formulario dinámico -->
    <app-dynamic-modal [modalTitle]="'Agregar Nuevo Empleado'" [modalFields]="modalFields">
    </app-dynamic-modal>

    <!-- Tabla de empleados -->
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Cédula</th>
                    <th>Nombre</th>
                    <th>Teléfono</th>
                    <th>Registrado desde</th>
                    <th>Cargo</th>
                    <th>Rol en sistema</th>
                    <th>Opciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let employee of employees; let i = index">
                    <td>
                        <input type="text" class="form-control form-control-sm" [(ngModel)]="employee.document"
                            (blur)="updateEmployee(i)" placeholder="Cédula" style="width: 120px;">
                    </td>
                    <td>{{ employee.name }}</td>
                    <td>{{ employee.phone || '-' }}</td>
                    <td>{{ employee.registeredSince || '-' }}</td>

                    <!-- Campo Cargo como Select -->
                    <td>
                        <select class="form-select" [(ngModel)]="employee.position">
                            <option *ngFor="let position of positions" [value]="position">{{ position }}</option>
                        </select>
                    </td>

                    <!-- Campo Rol en sistema como Select -->
                    <td>
                        <select class="form-select" [(ngModel)]="employee.role">
                            <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
                        </select>
                    </td>

                    <td class="text-center">
                        <div class="btn-group" role="group">
                            <!-- Icono de Ver Información -->
                            <button class="btn btn-outline-info btn-sm" (click)="viewEmployeeInfo(employee)">
                                <i class="fas fa-eye"></i>
                            </button>

                            <!-- Icono de Guardar cambios -->
                            <button class="btn btn-outline-success btn-sm" (click)="deleteEmployee(i)">
                                <i class="fas fa-save"></i>
                            </button>

                            <!-- Icono de Eliminar con Confirmación -->
                            <button class="btn btn-outline-danger btn-sm"
                                (click)="openConfirmModal('Eliminar Empleado', '¿Seguro que deseas eliminar este registro?', 'Eliminar', 'Cancelar')">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>