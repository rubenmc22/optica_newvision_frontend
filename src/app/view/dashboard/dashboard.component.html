<div class="container-fluid px-4 mt-4">

    <div class="row">
        <!-- Pacientes registrados -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="small-box bg-info">
                <div class="inner">
                    <div class="h4 fw-bold">{{ datosLocales?.total ?? 0 }}</div>
                    <p>Pacientes registrados</p>
                </div>
                <div class="icon">
                    <i class="fas fa-user-injured"></i>
                </div>
                <a [routerLink]="['/pacientes']" class="small-box-footer">
                    M√°s informaci√≥n <i class="fas fa-arrow-circle-right"></i>
                </a>
            </div>
        </div>

        <!-- Historias m√©dicas -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="small-box bg-success">
                <div class="inner">
                    <div class="h4 fw-bold">{{ totalHistorias }}</div>
                    <p>Historias m√©dicas</p>
                </div>
                <div class="icon">
                    <i class="fas fa-file-medical"></i>
                </div>
                <a [routerLink]="['/pacientes-historias']" class="small-box-footer">
                    M√°s informaci√≥n <i class="fas fa-arrow-circle-right"></i>
                </a>
            </div>
        </div>

        <!-- Ventas hoy -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="small-box bg-warning">
                <div class="inner">
                    <div class="h4 fw-bold">{{ totalVentas }}</div>
                    <p>Ventas hoy</p>
                </div>
                <div class="icon">
                    <i class="fas fa-cash-register"></i>
                </div>
                <span class="small-box-footer text-white-50 d-block">M√°s informaci√≥n <i
                        class="fas fa-arrow-circle-right"></i></span>
            </div>
        </div>

        <!-- √ìrdenes pendientes -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="small-box bg-danger">
                <div class="inner">
                    <div class="h4 fw-bold">{{ ordenesPendientes }}</div>
                    <p>√ìrdenes pendientes</p>
                </div>
                <div class="icon">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <span class="small-box-footer text-white-50 d-block">M√°s informaci√≥n <i
                        class="fas fa-arrow-circle-right"></i></span>
            </div>
        </div>
    </div>

    <!-- üîπ Gr√°ficos -->
    <div *ngIf="datosLocales" class="row g-4">
        <div class="col-md-6 col-zoom-stack mb-4">
            <div class="card shadow-sm border-0 h-90">
                <div class="card-header fw-bold text-muted">üìÖ Distribuci√≥n mensual</div>
                <div class="card-body">
                    <app-grafico-pacientes-por-mes [data]="datosLocales.porMes"></app-grafico-pacientes-por-mes>
                </div>
            </div>
        </div>

        <div class="col-md-6 col-zoom-stack mb-4" *ngIf="puedeVerComparativa">
            <div class="card shadow-sm border-0 h-90">
                <div class="card-header fw-bold text-muted">üè• Comparativa por sede</div>
                <div class="card-body">
                    <app-grafico-comparativa-sedes [data]="datosComparativa"></app-grafico-comparativa-sedes>
                </div>
            </div>
        </div>
    </div>

    <!-- Mensaje cuando no hay datos para gr√°ficos -->
    <div *ngIf="!datosLocales && totalHistorias === 0" class="row mt-4">
        <div class="col-12">
            <div class="alert alert-info text-center">
                <i class="fas fa-info-circle me-2"></i>
                No hay datos suficientes para mostrar los gr√°ficos. Los gr√°ficos se mostrar√°n cuando haya pacientes e historias m√©dicas registradas.
            </div>
        </div>
    </div>
</div>