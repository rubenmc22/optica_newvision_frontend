<div class="login-compact">
  <!-- Fondo -->
  <div class="login-background">
    <img class="login-background-image" src="/assets/fondo/IMG_9792.JPG" alt="">
  </div>

  <!-- Tarjeta Compacta -->
  <div class="login-card-container">
    <div class="card login-card-compact">
      <!-- Header Compacto -->
      <div class="card-header-compact">
        <div class="header-content">
          <div class="header-icon">
            <i class="bi bi-shield-lock"></i>
          </div>
          <div class="header-text">
            <h4 class="header-title">Iniciar Sesión</h4>
            <div class="header-subtitle">Accede al sistema</div>
          </div>
        </div>
      </div>

      <!-- Cuerpo Compacto -->
      <div class="card-body-compact">
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form-compact">

          <!-- Campo Sede -->
          <div class="form-group-compact">
            <label class="form-label-compact">
              <i class="bi bi-building"></i>
              Sede
            </label>
            <div class="input-with-icon">
              <select class="form-control-compact" formControlName="sede">
                <option value="">Seleccione una sede</option>
                <option *ngFor="let s of sedes" [value]="s.key">{{ s.nombre }}</option>
              </select>
              <i class="bi bi-chevron-down input-icon"></i>
            </div>
            <div *ngIf="isInvalidField('sede')" class="form-error">
              <i class="bi bi-exclamation-circle"></i>
              <span>La sede es requerida</span>
            </div>
          </div>

          <!-- Campo Cédula -->
          <div class="form-group-compact">
            <label class="form-label-compact">
              <i class="bi bi-person-badge"></i>
              Cédula
            </label>
            <div class="input-with-icon">
              <input type="text" class="form-control-compact" formControlName="cedula"
                placeholder="Ingrese su cédula" />
              <i class="bi bi-person input-icon"></i>
            </div>
            <div *ngIf="isInvalidField('cedula')" class="form-error">
              <i class="bi bi-exclamation-circle"></i>
              <span *ngIf="loginForm.get('cedula')?.hasError('required')">La cédula es requerida</span>
              <span *ngIf="loginForm.get('cedula')?.hasError('pattern')">Solo números, máximo 8 dígitos</span>
            </div>
          </div>

          <!-- Campo Contraseña -->
          <div class="form-group-compact">
            <label class="form-label-compact">
              <i class="bi bi-lock"></i>
              Contraseña
            </label>
            <div class="input-with-icon">
              <input [type]="showPassword ? 'text' : 'password'" class="form-control-compact" formControlName="password"
                placeholder="Ingrese su contraseña" />
              <i class="bi bi-key input-icon"></i>
              <button type="button" class="password-toggle" (click)="toggleShowPassword()">
                <i class="bi" [class.bi-eye]="!showPassword" [class.bi-eye-slash]="showPassword"></i>
              </button>
            </div>
            <div *ngIf="isInvalidField('password')" class="form-error">
              <i class="bi bi-exclamation-circle"></i>
              <span *ngIf="loginForm.get('password')?.hasError('required')">La contraseña es requerida</span>
              <span *ngIf="loginForm.get('password')?.hasError('minlength')">Mínimo 6 caracteres</span>
            </div>
          </div>

          <!-- Opciones Compactas -->
          <div class="form-options-compact">
            <label class="checkbox-compact">
              <input type="checkbox" formControlName="rememberMe">
              <span class="checkmark-compact"></span>
              <span class="checkbox-text">Recordar mis datos</span>
            </label>
            <a href="/forgot-password" class="forgot-link-compact">
              ¿Olvidó contraseña?
            </a>
          </div>

          <!-- Botón Compacto -->
          <button type="submit" class="btn-login-compact" [disabled]="loginForm.invalid || isLoading"
            [class.loading]="isLoading">
            <span class="btn-content">
              <span class="btn-text" *ngIf="!isLoading">Ingresar</span>
              <span class="btn-loading" *ngIf="isLoading">
                <span class="spinner-compact"></span>
                Ingresando...
              </span>
            </span>
            <i class="bi bi-arrow-right-short"></i>
          </button>

          <!-- Mensaje de Seguridad Compacto -->
          <div class="security-compact">
            <i class="bi bi-shield-check"></i>
            <span>Conexión segura</span>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<ng-container *ngIf="loader.loading$ | async">
  <app-global-loader></app-global-loader>
</ng-container>